# Experiment 5: Subqueries and Views

## AIM
To study and implement subqueries and views.

## THEORY

### Subqueries
A subquery is a query inside another SQL query and is embedded in:
- WHERE clause
- HAVING clause
- FROM clause

**Types:**
- **Single-row subquery**:
  Sub queries can also return more than one value. Such results should be made use along with the operators in and any.
- **Multiple-row subquery**:
  Here more than one subquery is used. These multiple sub queries are combined by means of ‘and’ & ‘or’ keywords.
- **Correlated subquery**:
  A subquery is evaluated once for the entire parent statement whereas a correlated Sub query is evaluated once per row processed by the parent statement.

**Example:**
```sql
SELECT * FROM employees
WHERE salary > (SELECT AVG(salary) FROM employees);
```
### Views
A view is a virtual table based on the result of an SQL SELECT query.
**Create View:**
```sql
CREATE VIEW view_name AS
SELECT column1, column2 FROM table_name WHERE condition;
```
**Drop View:**
```sql
DROP VIEW view_name;
```

**Question 1**

Write a SQL query that retrieve all the columns from the table "Grades", where the grade is equal to the maximum grade achieved in each subject.

Sample table: GRADES (attributes: student_id, student_name, subject, grade)

![image](https://github.com/user-attachments/assets/68246e47-48ba-4c69-ba5d-a065c96868b3)

**Output:**

![image](https://github.com/user-attachments/assets/cbeba640-5923-4dba-b5ec-789150c6e1ed)



**Question 2**

From the following tables, write a SQL query to find all orders generated by the salespeople who may work for customers whose id is 3007. Return ord_no, purch_amt, ord_date, customer_id, salesman_id.

Table Name: orders

![image](https://github.com/user-attachments/assets/c60ccf7e-cf07-4c01-9e53-754805feb3f5)



**Output:**

![image](https://github.com/user-attachments/assets/b64ed217-cfb6-499e-bbb9-c11a76180f5d)




**Question 3**

Write a SQL query to Identify customers whose city is different from the city of the customer with the highest ID

SAMPLE TABLE: customer

![image](https://github.com/user-attachments/assets/c98cb9c7-de47-4470-ab99-b2337135a0b7)

**Output:**


![image](https://github.com/user-attachments/assets/e4f7aa2c-a596-4dab-b2f1-86a8e449a18d)



**Question 4**

Write a SQL query to retrieve all columns from the CUSTOMERS table for customers whose salary is LESS than $2500.

Sample table: CUSTOMERS
![image](https://github.com/user-attachments/assets/3eb5c44c-db97-4123-ade2-b1c4d5420050)


**Output:**

![image](https://github.com/user-attachments/assets/5b5b1b15-8e09-4cb4-88ad-de13465dce79)


**Question 5**

Write a SQL query to retrieve all columns from the CUSTOMERS table for customers whose salary is EQUAL TO $1500.

Sample table: CUSTOMERS

![image](https://github.com/user-attachments/assets/6c46d737-3297-4c99-b7b1-202483d0a3a8)

**Output:**

![image](https://github.com/user-attachments/assets/eae51394-0ec2-44dc-9d58-403c0c7d0212)



**Question 6**

Write a SQL query that retrieves the names of students and their corresponding grades, where the grade is equal to the minimum grade achieved in each subject.

Sample table: GRADES (attributes: student_id, student_name, subject, grade)

![image](https://github.com/user-attachments/assets/2241be42-ccdd-4da3-b158-7e8318c89dad)


**Output:**

![image](https://github.com/user-attachments/assets/4abe56f2-6fe0-4ceb-9a40-a25045966900)



**Question 7**

Write a SQL query to retrieve all columns from the CUSTOMERS table for customers whose AGE is LESS than $30

Sample table: CUSTOMERS

![image](https://github.com/user-attachments/assets/58dab1e2-e962-4bd6-8d90-9d906da0fb81)

**Output:**

![image](https://github.com/user-attachments/assets/b179c05b-a859-4d6d-b5f3-3958079014c3)



**Question 8**

Write a SQL query to Find employees who have an age less than the average age of employees with incomes over 2.5 Lakh

Employee Table

![image](https://github.com/user-attachments/assets/8fead81f-bdf9-4fad-904c-e5058c67c72e)

**Output:**

![image](https://github.com/user-attachments/assets/0dcf7ca9-0e8b-4890-857b-beff3165eefe)



**Question 9**

Write a SQL query that retrieves the all the columns from the Table Grades, where the grade is equal to the minimum grade achieved in each subject.

Sample table: GRADES (attributes: student_id, student_name, subject, grade)

![image](https://github.com/user-attachments/assets/4e4fa5d0-6a9e-4684-8d7d-73b7d6a0a164)


**Output:**

![image](https://github.com/user-attachments/assets/55cca12a-dde9-423d-b7a4-ca5a8f673148)



**Question 10**

From the following tables, write a SQL query to determine the commission of the salespeople in Paris. Return commission.

salesman table

![image](https://github.com/user-attachments/assets/30a04887-3212-4197-a997-b16ea569bd07)


**Output:**

![image](https://github.com/user-attachments/assets/4a03ba65-7d25-43e3-9a8c-7f344af09481)



## RESULT
Thus, the SQL queries to implement subqueries and views have been executed successfully.
